(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{395:function(n,e,s){"use strict";s.r(e);var t=s(25),a=Object(t.a)({},(function(){var n=this,e=n.$createElement,s=n._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("p",[n._v('ps(react: "version": "16.9.0")')]),n._v(" "),s("h1",{attrs:{id:"问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[n._v("#")]),n._v(" 问题")]),n._v(" "),s("p",[n._v("最近重新clone了react的源码，想使用react自带的jest测试用例来进行调试react源码")]),n._v(" "),s("h1",{attrs:{id:"解决"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决"}},[n._v("#")]),n._v(" 解决")]),n._v(" "),s("p",[n._v("1， 使用react 推荐的方法\n"),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/4432476-1ab70c79ec049daf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}}),n._v("\n但是使用之后，感觉进去之后，不是很方便，而且里边所有的源码都是babel转换之后的。\n2，使用vscode\n在https://github.com/microsoft/vscode-recipes中找到\n"),s("img",{attrs:{src:"https://upload-images.jianshu.io/upload_images/4432476-b9eee6ff9ccb4fdf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240",alt:"image.png"}}),n._v("\n直接按照提示复制如下代码到vscode的lanch.json里边")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "type": "node",\n      "request": "launch",\n      "name": "Jest All",\n      "program": "${workspaceFolder}/node_modules/.bin/jest",\n      "args": ["--runInBand"],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen",\n      "disableOptimisticBPs": true,\n      "windows": {\n        "program": "${workspaceFolder}/node_modules/jest/bin/jest",\n      }\n    },\n    {\n      "type": "node",\n      "request": "launch",\n      "name": "Jest Current File",\n      "program": "${workspaceFolder}/node_modules/.bin/jest",\n      "args": [\n        "${fileBasenameNoExtension}",\n        "--config",\n        "jest.config.js"\n      ],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen",\n      "disableOptimisticBPs": true,\n      "windows": {\n        "program": "${workspaceFolder}/node_modules/jest/bin/jest",\n      }\n    }\n  ]\n}\n')])])]),s("p",[n._v("但是会提示error，不是node环境，于是需要加上如下配置")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('"env": {\n        "NODE_ENV": "development"\n      },\n')])])]),s("p",[n._v("然后修改Jest current File的args，直接从react 自己的package.json里边的debug-test里边复制过来")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('"args": [\n        "${fileBasenameNoExtension}",\n        "--config",\n        "./scripts/jest/config.source.js",\n        "--runInBand"\n      ],\n')])])]),s("p",[n._v("所以最后配置如下：")]),n._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('{\n  "version": "0.2.0",\n  "configurations": [\n    {\n      "type": "node",\n      "request": "launch",\n      "name": "Jest All",\n      "program": "${workspaceFolder}/node_modules/.bin/jest",\n      "args": [\n        "--config",\n        "./scripts/jest/config.source.js",\n        "--runInBand"\n      ],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen",\n      "disableOptimisticBPs": true,\n      "windows": {\n        "program": "${workspaceFolder}/node_modules/jest/bin/jest",\n      },\n      "env": {\n        "NODE_ENV": "development"\n      }\n    },\n    {\n      "type": "node",\n      "request": "launch",\n      "name": "Jest Current File",\n      "program": "${workspaceFolder}/node_modules/.bin/jest",\n      "args": [\n        "${fileBasenameNoExtension}",\n        "--config",\n        "./scripts/jest/config.source.js",\n        "--runInBand"\n      ],\n      "console": "integratedTerminal",\n      "internalConsoleOptions": "neverOpen",\n      "disableOptimisticBPs": true,\n      "env": {\n        "NODE_ENV": "development"\n      },\n      "windows": {\n        "program": "${workspaceFolder}/node_modules/jest/bin/jest",\n      }\n    }\n  ]\n}\n')])])]),s("p",[n._v("然后随便找个jest 测试用例，在里边打断点就可以了。\n但是发现有的代码vscode是进不去的，也就是说如果单步调试的话，有的代码会直接跳过，搜了下，找到了一个解决办法，\nhttps://segmentfault.com/q/1010000019212441?sort=created\n然后就可以直接调试了")])])}),[],!1,null,null,null);e.default=a.exports}}]);